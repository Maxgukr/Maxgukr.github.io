<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"left","width":300,"display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="操作系统-虚拟存储概念">
<meta name="keywords" content="操作系统">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统-虚拟存储概念">
<meta property="og:url" content="http://yoursite.com/2019/08/25/操作系统-虚拟存储概念/index.html">
<meta property="og:site_name" content="Maxwei | My personal blog">
<meta property="og:description" content="操作系统-虚拟存储概念">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/08/25/操作系统-虚拟存储概念/x86_page.png">
<meta property="og:updated_time" content="2019-09-17T12:25:08.443Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="操作系统-虚拟存储概念">
<meta name="twitter:description" content="操作系统-虚拟存储概念">
<meta name="twitter:image" content="http://yoursite.com/2019/08/25/操作系统-虚拟存储概念/x86_page.png">





  
  
  <link rel="canonical" href="http://yoursite.com/2019/08/25/操作系统-虚拟存储概念/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>操作系统-虚拟存储概念 | Maxwei | My personal blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Maxwei | My personal blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Succes is not final, failure is not fatal. It is the courage to continiue that counts.</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/Maxgukr" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/25/操作系统-虚拟存储概念/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fang Wei">
      <meta itemprop="description" content="希望可以在这里记录自己成长">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Maxwei | My personal blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">操作系统-虚拟存储概念

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-25 21:31:04" itemprop="dateCreated datePublished" datetime="2019-08-25T21:31:04+08:00">2019-08-25</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-09-17 20:25:08" itemprop="dateModified" datetime="2019-09-17T20:25:08+08:00">2019-09-17</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>操作系统-虚拟存储概念<br><a id="more"></a></p>
<p>在物理内存中找到一块可以给进程使用的存储空间，称之为内存分配，分为连续和不连续两种。在不连续内存分配中，可以使进程的地址空间不连续，从而提高内存的利用率，减少碎片的产生；在不连续内存分配的基础上，进一步引入虚拟存储技术，将一部分存储空间放在外部，进一步扩大进程可以使用的空间范围。这样做会带来很多问题，因为外存的访问速度要慢很多。需要用到的技术：</p>
<ul>
<li>虚拟存储的需求背景</li>
<li>覆盖技术</li>
<li>交换技术</li>
<li>局部性原理</li>
<li>虚拟存储概念</li>
<li>虚拟页式存储</li>
<li>缺页异常</li>
</ul>
<h2 id="虚拟存储的需求背景"><a href="#虚拟存储的需求背景" class="headerlink" title="虚拟存储的需求背景"></a>虚拟存储的需求背景</h2><p>对存储需求的需要越来越大，应用的规模越来越大，计算机系统时常出现内存空间不够用的情况的，普遍有两种解决办法：</p>
<ul>
<li><strong>覆盖</strong> 应用程序需<em>手动</em>把需要的指令和数据保存在内存中,利用代码之间的部分不相关性，让一部分代码共用一部分存储空间，这样做增加了编程和维护的难度</li>
<li><strong>交换</strong> 操作系统自动把暂时不能执行的程序保存到外存中。兑换和交换的单位是整个进程的地址空间</li>
<li><strong>虚拟存储</strong> 在有限容量的内存中，以页为单位<em>自动</em>装入<em>更多更大</em>的程序</li>
</ul>
<h2 id="覆盖和交换"><a href="#覆盖和交换" class="headerlink" title="覆盖和交换"></a>覆盖和交换</h2><p><strong>覆盖技术</strong></p>
<p>目标：　在较小的可用内存中运行较大的程序</p>
<p>方法：　依据程序逻辑结构，将程序划分为若干个<em>功能相对独立</em>的模块；将<em>不会同时</em>执行的模块共享同一块内存区域</p>
<ul>
<li>必要部分：　常用功能的代码和数据常驻内存</li>
<li>可选部分：　不常用功能放在其他程序模块中，只在需要时装入内存</li>
<li>不存在调用关系的模块可以相互覆盖，共用同一块内存区域</li>
</ul>
<p>覆盖技术的不足：</p>
<ul>
<li>增加编程困难 需要程序员划分功能模块，并确定模块间的覆盖关系；增加了编程的复杂度</li>
<li>增加执行时间　从外存装入覆盖模块；时间换空间</li>
</ul>
<p><strong>交换技术</strong></p>
<p>目标：　增加正在运行或需要运行的程序的内存</p>
<p>实现方法：　</p>
<ul>
<li>可将暂时不能运行的程序放到外存</li>
<li>换入换出的基本单位：进程的整个进程空间</li>
</ul>
<p>交换技术面临的问题：</p>
<p>交换时机：何时需要发生交换？只有当内存空间不够或有不够的可能时换出</p>
<p>交换大小：存放所有用户进程的所有内存映像的拷贝</p>
<p>程序换入时的重定位：换出后再换入时要放在原处吗？采用动态地址映射的方法</p>
<p><strong>覆盖和交换的比较</strong></p>
<p>覆盖：</p>
<ul>
<li>只能发生在没有调用关系的模块间</li>
<li>程序员需给出模块间的逻辑覆盖结构</li>
<li>发生在运行程序的内部模块间</li>
</ul>
<p>交换：</p>
<ul>
<li>以进程为单位</li>
<li>不需要模块间的逻辑覆盖结构</li>
<li>发生在内存进程间</li>
</ul>
<h2 id="局部性原理"><a href="#局部性原理" class="headerlink" title="局部性原理"></a>局部性原理</h2><p>虚拟存储技术的目标：</p>
<ul>
<li>只把部分程序放到内存中，从而运行比物理内存大的程序 <ul>
<li>由操作系统自动完成，无需程序员的干涉</li>
</ul>
</li>
<li>实现进程在内存与外存之间的交换，从而获得更多的空闲内存空间<ul>
<li>在内存和外存之间只交换进程的部分内容</li>
</ul>
</li>
</ul>
<p><strong>局部性原理</strong></p>
<p>程序在执行过程中的一个较短时间，所执行的指令地址和指令的操作数地址，分别局限于一定区域</p>
<ul>
<li>时间局限性<ul>
<li>一条指令的一次执行和下次执行，一个数据的一次访问和下次访问都集中在一个较短时期内</li>
</ul>
</li>
<li>空间局限性<ul>
<li>当前指令和临近的几条指令，当前访问的数据和临近的几个数据都集中在一个较小区域内</li>
</ul>
</li>
<li>分支局部性<ul>
<li>一条跳转指令的两次执行，很可能跳到相同的内存位置</li>
</ul>
</li>
<li>局部性原理的意义<ul>
<li>从理论上来说，虚拟存储技术是能够实现的，而且是可以取得满意结果的</li>
</ul>
</li>
</ul>
<h2 id="虚拟存储概念"><a href="#虚拟存储概念" class="headerlink" title="虚拟存储概念"></a>虚拟存储概念</h2><ul>
<li>思路：把不常用的数据块放在外存里面去</li>
<li>原理：<ul>
<li>装载程序时</li>
</ul>
<ul>
<li>只将当前指令执行需要的部分页面或段装入内存</li>
</ul>
<ul>
<li>指令执行中需要的指令或数据不在内存(称为缺页或缺段)时</li>
</ul>
<ul>
<li>处理器通知操作系统将相应的页面或段调入内存</li>
</ul>
<ul>
<li>操作系统将暂时不用的页面或段保存到外存</li>
</ul>
</li>
<li>实现方式<ul>
<li>虚拟页式存储</li>
<li>虚拟段式存储</li>
</ul>
</li>
</ul>
<h2 id="虚拟页式存储"><a href="#虚拟页式存储" class="headerlink" title="虚拟页式存储"></a>虚拟页式存储</h2><p>在页式存储的基础中增加请求调页和压面置换算法</p>
<ul>
<li>当用户程序装载到内存运行时，之装入部分页面，就启动程序运行</li>
<li>进程在运行中发现有需要的代码或数据不在内存时，则向系统发出缺页异常请求</li>
<li>操作系统在处理缺页异常时，将外存中相应的页面调入内存中，使得程序能继续运行</li>
</ul>
<p><img src="/2019/08/25/操作系统-虚拟存储概念/x86_page.png" alt></p>
<p>虚拟页式的存储和页式存储的方法基本一致。在上图可以看出，首先在线性地址(由虚拟地址通过段映射得到)中有三个部分的内容：目录项，表项，地址偏移项；寄存器cr3中保存了目录表的基地址，通过线性地址中的目录项偏移找到目录项内容，目录项中保存了二级页表的基地址，加上线性地址中的二级页表偏移项，找到二级页表项，里面保存了最终的物理地址基地址，最后加上物理内存偏移，最后找到对应的物理内存。</p>
<p>虚拟页式存储在页式存储的基础上，在页表项后面加上一些标志位，表示页表内容是否在物理内存中。命中了就直接索引，没有命中就引发缺页异常。</p>
<p>驻留位：是否在物理内存中有映射</p>
<p>修改位：是否有修改，有的话，修改在回收的时需要写回外存</p>
<p>访问位：表示该页是否被经常访问</p>
<p>保护位：</p>
<h2 id="缺页异常"><a href="#缺页异常" class="headerlink" title="缺页异常"></a>缺页异常</h2><p>缺页异常的处理流程:</p>
<ol>
<li>在内存中有空闲物理内存页面时，分配一物理内存页帧f，转到５步；没有空间物理内存时，转到第2步;</li>
<li>依据页面置换算法选择将被替换的物理页帧f，对应的逻辑页q;</li>
<li>如果q被修改过，则把它写回外存;</li>
<li>修改q的页表项中驻留位为0；</li>
<li>将需要访问的页p装入到物理页帧f;</li>
<li>修改p的页表驻留项为1，物理页帧号为f；</li>
<li>重新执行产生缺页的指令</li>
</ol>
<p>虚拟页存储中的外存管理</p>
<p>在何处保存未被映射的页？</p>
<ul>
<li>应该可以方便找到</li>
<li>交换空间</li>
</ul>
<p>虚拟页存储中的外存选择</p>
<ul>
<li>代码段－&gt;可执行二进制文件</li>
<li>动态加载的共享库程序段-&gt;动态调用的库文件</li>
<li>其他段：交换空间</li>
</ul>
<h2 id="虚拟页存储管理的效率"><a href="#虚拟页存储管理的效率" class="headerlink" title="虚拟页存储管理的效率"></a>虚拟页存储管理的效率</h2><p>EAT=访存时间<em>(1-p) + 缺页异常处理时间</em>缺页率p</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/操作系统/" rel="tag"># 操作系统</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/08/13/git常用命令/" rel="next" title="git常用命令记录">
                <i class="fa fa-chevron-left"></i> git常用命令记录
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/03/应聘记录/" rel="prev" title>
                 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Fang Wei</p>
              <div class="site-description motion-element" itemprop="description">希望可以在这里记录自己成长</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">44</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Maxgukr" title="GitHub &rarr; https://github.com/Maxgukr" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:fangweiah@outlook.com" title="E-Mail &rarr; mailto:fangweiah@outlook.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#虚拟存储的需求背景"><span class="nav-number">1.</span> <span class="nav-text">虚拟存储的需求背景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#覆盖和交换"><span class="nav-number">2.</span> <span class="nav-text">覆盖和交换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#局部性原理"><span class="nav-number">3.</span> <span class="nav-text">局部性原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#虚拟存储概念"><span class="nav-number">4.</span> <span class="nav-text">虚拟存储概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#虚拟页式存储"><span class="nav-number">5.</span> <span class="nav-text">虚拟页式存储</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#缺页异常"><span class="nav-number">6.</span> <span class="nav-text">缺页异常</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#虚拟页存储管理的效率"><span class="nav-number">7.</span> <span class="nav-text">虚拟页存储管理的效率</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fang Wei</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>



  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  




  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
